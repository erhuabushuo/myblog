Title: 数据挖掘指南：九、应该使用哪种相似度
Date: 2016-08-24 11:55
Category: Data Mining

整本书我们都将探索“应该使用哪种相似度的这个问题”，本文给出一些提示。

## 提示

* 如果数据存在“分数膨胀”问题，就试用皮尔逊相关系数。
* 如果数据比较“密集”，变量之间基本都存在公有值，且这些距离数据是非常重要的，那就试用欧几里得或曼哈顿距离。
* 如果数据是稀疏的，则试用余弦相似度。


## 数据稀疏是否可试用欧几里得或曼哈顿距离？

音乐有关的示例：假设有三个人，每人都给100首音乐评分过分。这三个人分别是Jake、Linda和Eric。

Linda和Eric喜欢相同的音乐，它们评分列表中有20首相同的歌曲，且评分均值相差不到0.5！
所以他们之间的曼哈顿距离为 20 * 0.5 = 10，欧几里得距离则为：

![](http://i2.buimg.com/1949/91acaf4a41e6b8de.png)

Linda和Jake评分列表中只有一首相同歌曲。Linda为这首歌打了3分，Jake打了5分，他们之间的曼哈顿距离
为2,欧几里得距离为：

![](http://i4.buimg.com/1949/366c545ceec258ea.png)


不管是曼哈顿距离还是欧几里得距离，Jake都要必Eric离Linda近，这不符合实际情况。


## 那是不是可以

认们给音乐打分是从1到5分，我是否可以给那些没有打分的音乐就统一给0分好了？

为了说明这样不行，我们再引入两个人到例子里头：Cooper和Kelsey，他们和Jake都有着非常相似的音乐偏好，其中Jake在网站商评价了25首歌曲。

Cooper评价了26首歌曲，其中25首和Jake是一样的。它们对每首歌曲的评价差值只有0.25!

Kelsey在网站上评价了150首歌曲，其中25首和Jake相同,。和Cooper一样，她和Jake之间的评价差值也只有0.25!

我们直觉上看Cooper和Keylsey离Jake的距离应该是相似的。但是，当我们计算他们之间的曼哈顿距离和欧几里得距离时（代入0值），会发现Cooper要比Keylsey离Jake近得多。

## 为什么呢？

我们来看下面的数据：

![](http://i2.buimg.com/1949/a78efd51327776a5.png)

从4、5、6这三首歌来看，两人离Jake的距离是相同的，但计算出的曼哈顿距离却不这么显示：

![](http://i2.buimg.com/1949/e6cd91e0dbaaab5a.png)

问题在于数据中的0值对结果的影响很大，所以用0代替空值的方法并不比原来的方程好。还有一种变通的方式是计算“平均值”——将两人共同评价过的歌曲分数除以歌曲数量。

总之，曼哈顿距离和欧几里得距离在数据完整的情况下会运作得非常好，如果数据比较稀疏，则要考虑使用余弦距离。









